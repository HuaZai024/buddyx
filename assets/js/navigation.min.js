"use strict";var buddyx_keymap={TAB:9};function buddyx_initNavigation(){buddyx_initNavToggleSubmenus(),buddyx_initNavToggleSmall()}function buddyx_initNavToggleSubmenus(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)buddyx_initEachNavToggleSubmenu(e[t])}function buddyx_initEachNavToggleSubmenu(e){var t=e.querySelectorAll(".menu ul");if(t.length)for(var n=buddyx_getDropdownButton(),d=0;d<t.length;d++){var o=t[d].parentNode,a=o.querySelector(".dropdown");if(!a){(a=document.createElement("span")).classList.add("dropdown");var l=document.createElement("i");l.classList.add("dropdown-symbol"),a.appendChild(l),t[d].parentNode.insertBefore(a,t[d])}var u=n.cloneNode(!0);u.innerHTML=a.innerHTML,a.parentNode.replaceChild(u,a),u.addEventListener("click",function(e){buddyx_toggleSubMenu(e.target.parentNode)}),o.addEventListener("mouseleave",function(e){buddyx_toggleSubMenu(e.target,!1)}),o.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)buddyx_toggleSubMenu(t[n],!1)}),t[d].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > button";buddyx_keymap.TAB===e.keyCode&&(e.shiftKey?buddyx_isfirstFocusableElement(e.target,document.activeElement,t)&&buddyx_toggleSubMenu(e.target.parentNode,!1):buddyx_islastFocusableElement(e.target,document.activeElement,t)&&buddyx_toggleSubMenu(e.target.parentNode,!1))}),t[d].parentNode.classList.add("menu-item--has-toggle")}}function buddyx_initNavToggleSmall(){var e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(var t=0;t<e.length;t++)buddyx_initEachNavToggleSmall(e[t])}function buddyx_initEachNavToggleSmall(t){var e=t.querySelector(".menu-toggle");e&&(e.setAttribute("aria-expanded","false"),e.addEventListener("click",function(e){t.classList.toggle("nav--toggled-on"),e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},!1))}function buddyx_toggleSubMenu(e,t){var n=e.querySelector(".dropdown-toggle"),d=e.querySelector("ul"),o=e.classList.contains("menu-item--toggled-on");if(void 0!==t&&"boolean"==typeof t&&(o=!t),n.setAttribute("aria-expanded",(!o).toString()),o){e.classList.remove("menu-item--toggled-on"),d.classList.remove("toggle-show"),n.setAttribute("aria-label",buddyxScreenReaderText.expand);for(var a=e.querySelectorAll(".menu-item--toggled-on"),l=0;l<a.length;l++)buddyx_toggleSubMenu(a[l],!1)}else{for(var u=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),r=0;r<u.length;r++)buddyx_toggleSubMenu(u[r],!1);e.classList.add("menu-item--toggled-on"),d.classList.add("toggle-show"),n.setAttribute("aria-label",buddyxScreenReaderText.collapse)}}function buddyx_getDropdownButton(){var e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",buddyxScreenReaderText.expand),e}function buddyx_isfirstFocusableElement(e,t,n){var d=e.querySelectorAll(n);return 0<d.length&&t===d[0]}function buddyx_islastFocusableElement(e,t,n){var d=e.querySelectorAll(n);return 0<d.length&&t===d[d.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",buddyx_initNavigation):buddyx_initNavigation(),function(){var e=document.getElementById("masthead"),r=document.querySelectorAll(".buddyx-mobile-menu")[0];e&&r&&document.addEventListener("keydown",function(e){var t=r.querySelectorAll("input, a, button"),n=document.querySelector(".menu-close"),d=t[t.length-1],o=t[0],a=document.activeElement,l=9===e.keyCode,u=e.shiftKey;!u&&l&&d===a&&(e.preventDefault(),n.focus()),u&&l&&o===a&&(e.preventDefault(),n.focus()),u&&l&&n===a&&(e.preventDefault(),d.focus())})}();